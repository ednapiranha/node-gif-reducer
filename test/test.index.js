'use strict';

process.env.NODE_ENV = 'test';

var should = require('should');

var GIFReducer = require('../index');
var gr = new GIFReducer();

gr.filePath = 'test/test.gif';

describe('reducer', function () {
  it('should reduce the frames', function (done) {
    gr.reduce(function (err, frames) {
      frames.length.should.equal(4);
      frames[0].data.toString('base64').should.equal('/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////w==');
      done();
    });
  });

  it('should return the new buffer', function (done) {
    gr.bufferize(function (err, buffer) {
      buffer.length.should.equal(5682);
      done();
    });
  });
});